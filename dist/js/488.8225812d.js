"use strict";(self["webpackChunkvue2_0"]=self["webpackChunkvue2_0"]||[]).push([[488],{3488:function(t,e,s){s.r(e),s.d(e,{default:function(){return p}});var a=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"search"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.address,expression:"address"}],staticClass:"search-inp",attrs:{type:"text",placeholder:"请输入要搜索的地名"},domProps:{value:t.address},on:{input:function(e){e.target.composing||(t.address=e.target.value)}}}),e("div",{staticClass:"search-btn",on:{click:t.search}},[t._v("搜索")])]),e("div",{staticStyle:{height:"400px",width:"100%","text-align":"center","line-height":"500px","font-size":"20px"},attrs:{id:"container"}}),e("div",{staticClass:"list"},t._l(t.list,(function(s,a){return e("div",{key:a,staticClass:"list-item",on:{click:function(e){return t.listClick(s)}}},[e("div",{staticClass:"list-item-left"},[e("div",{staticClass:"list-item-name"},[t._v(t._s(s.name||""))]),e("div",{staticClass:"list-item-address"},[t._v(t._s(s.addr||""))])]),e("div",{staticClass:"list-item-btn"},[t._v("发送")])])})),0)])},n=[],i=s(2594),o=s(8848);const r=window.qq;var l={components:{Field:i.Z},data(){return{str:"",list:[],address:""}},created(){document.title="地图"},mounted(){o.Z.loading({duration:0,forbidClick:!0,message:"加载地图中..."}),this.type=!1,this.geolocation=new r.maps.Geolocation("DRSBZ-WO43X-OLO4S-ZOVE5-AB6RV-5WFH2","111"),this.getGd()},methods:{getGd(){const t=this;AMap.plugin("AMap.Geolocation",(function(){var e=new AMap.Geolocation({enableHighAccuracy:!0,timeout:1e4,buttonPosition:"RB",buttonOffset:new AMap.Pixel(10,20),zoomToAccuracy:!0});console.log(e,"geo"),e.getCurrentPosition((function(e,s){if("complete"==e){console.log(s);const{lat:e,lng:a}=s.position;t.lat=e,t.lng=a,t.initAddress(e,a)}else console.log(s,"err")}))}))},initAddress(t,e){o.Z.clear(),this.isOk=!0;const s=this;this.lat=t,this.lng=e;const a=new TMap.service.Geocoder,n=new TMap.LatLng(t,e);a.getAddress({location:n}).then((a=>{const{status:n,result:i}=a;0==n&&(s.list=[{addr:i.address,name:i.formatted_addresses.recommend,latLng:{lat:t,lng:e}}])})).catch((t=>{console.log(t,"err")})),this.initMap()},search(){if(!this.isOk)return;if(!this.address)return;const t=this,e=new r.maps.SearchService({complete:function(s){if("CITY_LIST"===s.type)return e.setLocation(s.detail.cities[0].cityName),void(t.address&&e.search(t.address));const a=s.detail.pois;t.list=a.map((t=>({addr:t.address,latLng:t.latLng,name:t.name})));const n=new r.maps.LatLngBounds;for(let t=0,e=a.length;t<e;t++){const e=a[t];n.extend(e.latLng)}t.map.fitBounds(n),t.marker&&(t.marker.setMap(null),t.marker=new r.maps.Marker({position:a[0].latLng,map:t.map}))}});e.search(this.address)},initMap(){const t=this,e=new r.maps.LatLng(this.lat,this.lng),s={zoom:15,center:e,mapTypeId:r.maps.MapTypeId.ROADMAP};setTimeout((()=>{const a=this,n=new r.maps.Map(document.getElementById("container"),s);this.map=n;let i=null;this.lat&&(i=new r.maps.Marker({position:e,map:n})),this.map=n,this.marker=i,this.location={lat:this.lat,lng:this.lng},r.maps.event.addListener(n,"click",(function(e){if(this.disabled)return;const s=new r.maps.Geocoder({complete:e=>{t.list=e.detail.nearPois.map((t=>({addr:t.address,latLng:t.latLng,name:t.name})))}});a.marker&&a.marker.setMap(null),a.marker=new r.maps.Marker({position:e.latLng,map:n}),n.setZoom(20),n.setCenter(e.latLng),new r.maps.LatLng;const i=new r.maps.LatLng(e.latLng.getLat(),e.latLng.getLng());s.getAddress(i)}))}),500)},listClick(t){try{const e=new r.maps.LatLngBounds;e.extend(t.latLng),this.map.fitBounds(e),this.marker&&(this.marker.setMap(null),this.marker=new r.maps.Marker({position:t.latLng,map:this.map}))}catch(e){console.log(e)}alert(t.addr)}}},c=l,d=s(1001),m=(0,d.Z)(c,a,n,!1,null,"f92c2eb0",null),p=m.exports}}]);
//# sourceMappingURL=488.8225812d.js.map